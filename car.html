<!-- index.html ä¸»é¡µï¼šé»‘é‡‘ Â· åŒè¡Œè‡ªåŠ¨æµåŠ¨ Â· å¯ç‚¹å‡»è¿›è¯¦æƒ… Â· è¯­è¨€åˆ‡æ¢ Â· æœç´¢ -->
<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ONE MOTOR GROUP Â· Luxury Import Car Â· Malaysia</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* é˜²æ­¢ CSS æ²¡åŠ è½½æ—¶ç™½å±æŠ–åŠ¨çš„å°ä¿æŠ¤ */
    body{visibility:visible}
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨ LOGO + å“ç‰Œå­—æ · + è¯­è¨€ -->
  <header class="topbar">
    <div class="brand">
      <img src="logo.svg" alt="ONE MOTOR GROUP logo" class="logo"/>
      <div class="brand-text">
        <div class="title">ONE MOTOR GROUP</div>
        <div class="subtitle" data-i18n="tagline">LUXURY â€¢ IMPORT CAR â€¢ MALAYSIA</div>
      </div>
    </div>
    <div class="actions">
      <input id="search" class="search" placeholder="ğŸ” æœç´¢è½¦å‹ / ä»·æ ¼ / å…³é”®å­—" />
      <div class="lang">
        <button data-lang="zh" class="active">ä¸­æ–‡</button>
        <button data-lang="en">EN</button>
        <button data-lang="bm">BM</button>
      </div>
    </div>
  </header>

  <!-- åŒè¡Œè‡ªåŠ¨æµåŠ¨ -->
  <main class="showcase">
    <!-- ç¬¬ä¸€æ’ï¼šå‘å³ -->
    <section class="row" data-direction="right">
      <div class="track"></div>
      <div class="track clone"></div>
    </section>
    <!-- ç¬¬äºŒæ’ï¼šå‘å·¦ -->
    <section class="row" data-direction="left">
      <div class="track"></div>
      <div class="track clone"></div>
    </section>
  </main>

  <footer class="footer">Â© ONE MOTOR GROUP â€” All Rights Reserved</footer>

  <script>
    // ===== è¯­è¨€ï¼ˆåªåˆ‡æ¢å›ºå®š UI æ–‡æ¡ˆï¼›è½¦å‹åæŒ‰æ•°æ®åŸæ–‡æ˜¾ç¤ºï¼‰=====
    const i18n = {
      zh:{ tagline:"LUXURY Â· IMPORT CAR Â· MALAYSIA", search:"ğŸ” æœç´¢è½¦å‹ / ä»·æ ¼ / å…³é”®å­—", price:"ä»·æ ¼"},
      en:{ tagline:"LUXURY Â· IMPORT CAR Â· MALAYSIA", search:"ğŸ” Search model / price / keyword", price:"Price"},
      bm:{ tagline:"LUXURY Â· IMPORT CAR Â· MALAYSIA", search:"ğŸ” Cari model / harga / kata kunci", price:"Harga"}
    };
    const langBtns = document.querySelectorAll('.lang button');
    function setLang(l){
      document.querySelector('[data-i18n="tagline"]').textContent = i18n[l].tagline;
      const s = document.getElementById('search');
      s.placeholder = i18n[l].search;
      langBtns.forEach(b=>b.classList.toggle('active', b.dataset.lang===l));
      localStorage.setItem('omg_lang', l);
    }
    langBtns.forEach(b=>b.addEventListener('click',()=>setLang(b.dataset.lang)));
    setLang(localStorage.getItem('omg_lang') || 'zh');

    // ===== æ‹‰æ•°æ® + ç”Ÿæˆå¡ç‰‡ =====
    const ROW_CARD_COUNT = 8;           // æ¯æ’æ˜¾ç¤ºå¡ç‰‡æ•°é‡ï¼ˆè§†è§‰ä¸Šä¼šå¾ªç¯ï¼‰
    const BASE_SPEED = 40;              // æ»šåŠ¨é€Ÿåº¦ï¼ˆè¶Šå¤§è¶Šæ…¢ï¼‰
    let CARS = [];

    async function loadData(){
      try{
        const r = await fetch('cars.json?cachebust=' + Date.now());
        CARS = await r.json();
      }catch(e){
        // å…¼å®¹ä½ åªå¡«äº† name/price/image çš„ç®€è¡¨
        CARS = [];
      }
      // ç»™æ¯è¾†è½¦è¡¥å…¨ id / images
      CARS = CARS.map((c, i)=>({
        id: c.id || String(i+1),
        name: c.name || ('Vehicle #' + (i+1)),
        price: c.price || '',
        images: c.images || (c.image ? [c.image] : []),
        image: c.image || (c.images && c.images[0]) || '',
        desc: c.desc || {}
      }));
      if(CARS.length === 0){
        document.querySelector('.showcase').innerHTML =
          '<p class="empty">æš‚æ— è½¦è¾†æ•°æ®ï¼ˆè¯·ä¸Šä¼  cars.json ä¸å›¾ç‰‡ï¼‰</p>';
        return;
      }
      buildRows();
    }

    function buildRows(){
      const rows = document.querySelectorAll('.row');
      rows.forEach((row, rowIdx)=>{
        const track = row.querySelector('.track');
        const clone = row.querySelector('.track.clone');
        track.innerHTML = '';
        // ç”Ÿæˆå¡ç‰‡ï¼ˆæŒ‰ç´¢å¼•å¥‡å¶åˆ†é…åˆ°ä¸¤æ’ï¼šä¸Šæ’å¥‡æ•°ï¼Œä¸‹æ’å¶æ•°ï¼‰
        const list = CARS.filter((_,i)=> (rowIdx===0 ? i%2===0 : i%2===1));
        // ä¸ºäº†â€œæ— ç¼å¾ªç¯â€ï¼ŒæŠŠå®ƒé‡å¤åˆ°è¶³å¤Ÿé•¿
        const needed = Math.max(ROW_CARD_COUNT, list.length);
        const repeatList = [];
        while(repeatList.length < needed*2){ repeatList.push(...list); }
        repeatList.slice(0, needed*2).forEach(car=>{
          track.appendChild(makeCard(car));
        });
        // å…‹éš†ä¸€ä»½ç”¨äºæ— ç¼è¡”æ¥
        clone.innerHTML = track.innerHTML;

        // æ ¹æ®å†…å®¹å®½åº¦è®¾ç½®åŠ¨ç”»æ—¶é•¿ï¼ˆè¶Šé•¿èµ°å¾—è¶Šä¹…ï¼‰
        setTimeout(()=>{
          const contentWidth = track.scrollWidth;
          const duration = Math.max(15, contentWidth / BASE_SPEED);
          track.style.setProperty('--duration', duration + 's');
          clone.style.setProperty('--duration', duration + 's');
          // å¼€å§‹åŠ¨
          row.classList.add('play');
        }, 0);
      });
    }

    function makeCard(car){
      const a = document.createElement('a');
      a.className = 'card';
      a.href = 'car.html?id=' + encodeURIComponent(car.id);
      a.innerHTML = `
        <div class="thumb" style="background-image:url('${sanitize(car.image)}')">
          <div class="shine"></div>
        </div>
        <div class="info">
          <h3 class="name">${escapeHtml(car.name)}</h3>
          <div class="price">${escapeHtml(car.price)}</div>
        </div>
      `;
      return a;
    }

    // æœç´¢ï¼ˆåœ¨å½“å‰ä¸¤æ’é‡Œè¿‡æ»¤ï¼Œå†é‡å»ºï¼‰
    const search = 
